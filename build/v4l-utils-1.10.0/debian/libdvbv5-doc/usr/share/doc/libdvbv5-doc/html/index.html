<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>libdvbv5: The libdvbv5 API documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libdvbv5
   &#160;<span id="projectnumber">1.10.0</span>
   </div>
   <div id="projectbrief">Library to work with Digital TV devices on Linux</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">The libdvbv5 API documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section copyright"><dt>Copyright</dt><dd>GNU General Public License version 2 (GPLv2) </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Mauro Carvalho Chehab <a href="#" onclick="location.href='mai'+'lto:'+'m.c'+'he'+'hab'+'@s'+'ams'+'un'+'g.c'+'om'; return false;">m.che<span style="display: none;">.nosp@m.</span>hab@<span style="display: none;">.nosp@m.</span>samsu<span style="display: none;">.nosp@m.</span>ng.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>
<dl class="section user"><dt>Source code</dt><dd>The source code for libdvbv5 is available together with v4l-utils source code, at: <a href="http://git.linuxtv.org/cgit.cgi/v4l-utils.git/">http://git.linuxtv.org/cgit.cgi/v4l-utils.git/</a></dd></dl>
<dl class="section see"><dt>See also</dt><dd>For DVBv5 Kernel API specification, see <a href="http://linuxtv.org/downloads/v4l-dvb-apis/dvbapi.html">http://linuxtv.org/downloads/v4l-dvb-apis/dvbapi.html</a>.</dd></dl>
<dl class="section user"><dt>Bug Report</dt><dd>Please submit bug report and patches to <a href="#" onclick="location.href='mai'+'lto:'+'lin'+'ux'+'-me'+'di'+'a@v'+'ge'+'r.k'+'er'+'nel'+'.o'+'rg'; return false;">linux<span style="display: none;">.nosp@m.</span>-med<span style="display: none;">.nosp@m.</span>ia@vg<span style="display: none;">.nosp@m.</span>er.k<span style="display: none;">.nosp@m.</span>ernel<span style="display: none;">.nosp@m.</span>.org</a></dd></dl>
<h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>This is a library that provides access to DVB adapter cards using the Linux DVB API version 5, as defined at <a href="http://linuxtv.org/downloads/v4l-dvb-apis/dvbapi.html">http://linuxtv.org/downloads/v4l-dvb-apis/dvbapi.html</a>.</p>
<p>It also provides backward compatibility to a a driver that supports only the legacy DVBv3 API.</p>
<dl class="section note"><dt>Note</dt><dd>The DVBv3 API was deprecated at the Linux Kernel. Any Kernel since version 3.3 supports the DVBv5 API.</dd></dl>
<p>The DVBv3 API was replaced because its support is limited to just 4 standards, without covering their innovations: ATSC, DVB-C, DVB-T and DVB-S.</p>
<p>The DVBv5 API was originally introduced to support DVB-S2 (also called as DVB S2API, at the time it was merged), and were designed in a way that it can easily support any newer standards. So, extensions were added to support other standards, like ATSC-MH, DVB-T2, DVB-S2, ISDB, CMDB, etc.</p>
<p>Most of those standards are supported by libdvbv5.</p>
<p>As the libdvbv5 API is maintained by the same people that maintains the Linux DVB drivers, and it is used as the reference library, together with the dvbv5 applications, all new improvements at the Linux DVB API gets merged, the corresponding support at libdvbv5 is also included.</p>
<h1><a class="anchor" id="feature"></a>
Features provided by libdvbv5</h1>
<p>The libdvbv5 provides the following features:</p>
<ul>
<li>It uses the latest DVBv5 API speck to talk with the Digital TV devices on Linux, falling back to older versions of it, up to the latest version of the DVBv3 API;</li>
<li>It supports several Satellite Equipment Control (SEC) types and systems;</li>
<li>It supports SCR/Unicable setups for Satellite;</li>
<li>It supports several DiSEqC satellite system configurations;</li>
<li>It provides a standard way to scan for DVB channels for several different types of standards: DVB-S, DVB-S2, DVB-S Turbo, DVB-C DVB-T, DVB-T2, ATSC and ISDB-T;</li>
<li>It is flexible enough to be extended to support newer standards and newer features;</li>
<li>It provides a way to activate/deactivate the Low Noise Amplifier (LNA) on devices that support such feature;</li>
<li>It parses the MPEG-TS main tables found on Digital TV systems, like PAT, PMT, SDT, TVCT, CVCT, NIT, EIT, MGT and CAT;</li>
<li>Provides enhanced statistics indication about the Quality of Service provided by a tuned transponder.</li>
</ul>
<h1><a class="anchor" id="dvbv5_intro"></a>
Introduction to DVBv5 key value properties</h1>
<h2><a class="anchor" id="dvbv5_props"></a>
DVBv5 and libdvbv5 properties</h2>
<p>The deprecated DVBv3 frontend API used to declare an union that contains 4 structs inside, one for each of the supported standards (ATSC and DVB-T/C/S).</p>
<p>This gives no flexibility to extend, as adding more structs at the union would change the size of the struct, breaking the Kernelspace to userspace API, and causing all DVB applications to break.</p>
<p>So, instead of keeping using this approach, the DVBv5 API came with a different way: it passes a series of values using key/value properties.</p>
<p>Those values feed a in-Kernel cache. There are two special properties:</p><ul>
<li>DTV_CLEAR - clears the Kernel cache</li>
<li>DTV_TUNE - sends the cache for the DTV driver to tune into a transponder.</li>
</ul>
<p>See <a href="http://linuxtv.org/downloads/v4l-dvb-apis/FE_GET_SET_PROPERTY.html">http://linuxtv.org/downloads/v4l-dvb-apis/FE_GET_SET_PROPERTY.html</a> for more details.</p>
<p>The same way as DVBv5, the libdvbv5 API also works with a set of key/value properties.</p>
<p>Inside libdvbv5, there are two types of properties:</p>
<ul>
<li>The ones defined at the Kernel's frontent API, that are found at /usr/include/linux/dvb/frontend.h (actually, it uses a local copy of that file, stored at ./include/linux/dvb/frontend.h);</li>
<li>Some extra properties used by libdvbv5. Those can be found at <a class="el" href="dvb-v5-std_8h.html" title="Provides libdvbv5 defined properties for the frontend. ">lib/include/libdvbv5/dvb-v5-std.h</a> and start at DTV_USER_COMMAND_START.</li>
</ul>
<p>Those extra properties allow to control other parameters that are visible only on userspace, like the Service ID that will be used, and the corresponding audio and video program IDs.</p>
<h2><a class="anchor" id="dvbv5_stats"></a>
DVBv5 and libdvbv5 statistics</h2>
<p>Just like what happens with DVBv3 frontend setting, the statistics provided by DVBv3 has several issues.</p>
<p>On DVBv3, there are a number of special ioctls designed to get the statistics from a DTV device.</p>
<p>Those DVBv3 statistics are not flexible, and they lack the scales that are provided by each call. So, for example, a FE_READ_SNR ioctl returns a number from 0 to 65535, but there's no way to know if this number is a value in dB (or a submultiple) or if it is just a relative quality number related to the Signal/Noise ratio.</p>
<p>Also, some delivery systems like ISDB provide up to 4 statistics for each parameter, because it allows to set different modulation parameters to the several different layers of the stream.</p>
<p>Starting with DVBv5 version 5.10 (added on Kernel 3.8), there's now a new mechanism to retrieve the statistics. This mechanism provides a way to discover the scale used internally by the Kernel, allowing the userspace applications to properly present the statistics.</p>
<p>It also allows to obtain per-layer statistics, plus a global ponderated mean statistics for the transponder as a whole, on standards like ISDB.</p>
<p>Just like the DTV properties, the stats are cached. That warrants that all stats are got at the same time, when <a class="el" href="group__frontend.html#gafb6b35003768d938a4e1623d9fb82baa" title="Retrieve the stats from the Kernel. ">dvb_fe_get_stats()</a> is called. The Kernel drivers internally also warrant that those stats are also obtained for the same period of time, making them more coherent.</p>
<p>The libdvbv5 automatically detects if the Digital TV driver in usage provides the DVBv5 version 5.10 statistics mechanism. If it doesn't, it falls back to DVBv3 way.</p>
<p>If DVB version 5.10 is supported, it also provides an extra Quality of service indicator that tells if a received transponder has Poor, OK or Good quality. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
