<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>libdvbv5: Digital TV frontend scan</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libdvbv5
   &#160;<span id="projectnumber">1.10.0</span>
   </div>
   <div id="projectbrief">Library to work with Digital TV devices on Linux</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Digital TV frontend scan</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:dvb-scan_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dvb-scan_8h.html">dvb-scan.h</a></td></tr>
<tr class="memdesc:dvb-scan_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides interfaces to scan programs inside MPEG-TS digital TV streams. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdvb__v5__descriptors__program.html">dvb_v5_descriptors_program</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associates PMT with PAT tables.  <a href="structdvb__v5__descriptors__program.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the descriptors needed to scan the Service ID and other relevant info at a MPEG-TS Digital TV stream.  <a href="structdvb__v5__descriptors.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdvb__table__filter.html">dvb_table_filter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes the PES filters used by DVB scan.  <a href="structdvb__table__filter.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaf6f6f5e9d010a5060e256133cc94fcdf"><td class="memItemLeft" align="right" valign="top">typedef int(&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#gaf6f6f5e9d010a5060e256133cc94fcdf">check_frontend_t</a>) (void *args, struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *parms)</td></tr>
<tr class="memdesc:gaf6f6f5e9d010a5060e256133cc94fcdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for the application to show the frontend status.  <a href="#gaf6f6f5e9d010a5060e256133cc94fcdf">More...</a><br /></td></tr>
<tr class="separator:gaf6f6f5e9d010a5060e256133cc94fcdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0bd956908517ea2d53ad2de62df7247c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#ga0bd956908517ea2d53ad2de62df7247c">dvb_table_filter_free</a> (struct <a class="el" href="structdvb__table__filter.html">dvb_table_filter</a> *sect)</td></tr>
<tr class="memdesc:ga0bd956908517ea2d53ad2de62df7247c"><td class="mdescLeft">&#160;</td><td class="mdescRight">deallocates all data associated with a table filter  <a href="#ga0bd956908517ea2d53ad2de62df7247c">More...</a><br /></td></tr>
<tr class="separator:ga0bd956908517ea2d53ad2de62df7247c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga956af98a11484d5296abe1668f9485c4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#ga956af98a11484d5296abe1668f9485c4">dvb_read_section</a> (struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *parms, int dmx_fd, unsigned char tid, uint16_t pid, void **table, unsigned timeout)</td></tr>
<tr class="memdesc:ga956af98a11484d5296abe1668f9485c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">read MPEG-TS tables that comes from a DTV card  <a href="#ga956af98a11484d5296abe1668f9485c4">More...</a><br /></td></tr>
<tr class="separator:ga956af98a11484d5296abe1668f9485c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8938c61f97571d01e3608ff52c4e092"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#gab8938c61f97571d01e3608ff52c4e092">dvb_read_section_with_id</a> (struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *parms, int dmx_fd, unsigned char tid, uint16_t pid, int ts_id, void **table, unsigned timeout)</td></tr>
<tr class="memdesc:gab8938c61f97571d01e3608ff52c4e092"><td class="mdescLeft">&#160;</td><td class="mdescRight">read MPEG-TS tables that comes from a DTV card with an specific table section ID  <a href="#gab8938c61f97571d01e3608ff52c4e092">More...</a><br /></td></tr>
<tr class="separator:gab8938c61f97571d01e3608ff52c4e092"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf274aa17abefce824e5c4a2a8e082c4d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#gaf274aa17abefce824e5c4a2a8e082c4d">dvb_read_sections</a> (struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *parms, int dmx_fd, struct <a class="el" href="structdvb__table__filter.html">dvb_table_filter</a> *sect, unsigned timeout)</td></tr>
<tr class="memdesc:gaf274aa17abefce824e5c4a2a8e082c4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">read MPEG-TS tables that comes from a DTV card  <a href="#gaf274aa17abefce824e5c4a2a8e082c4d">More...</a><br /></td></tr>
<tr class="separator:gaf274aa17abefce824e5c4a2a8e082c4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f86effb71027013c4973527af9a25d0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#ga0f86effb71027013c4973527af9a25d0">dvb_scan_alloc_handler_table</a> (uint32_t delivery_system)</td></tr>
<tr class="memdesc:ga0f86effb71027013c4973527af9a25d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">allocates a struct <a class="el" href="structdvb__v5__descriptors.html" title="Contains the descriptors needed to scan the Service ID and other relevant info at a MPEG-TS Digital T...">dvb_v5_descriptors</a>  <a href="#ga0f86effb71027013c4973527af9a25d0">More...</a><br /></td></tr>
<tr class="separator:ga0f86effb71027013c4973527af9a25d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad83553d5b779c63dff7a6dda4348cc19"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#gad83553d5b779c63dff7a6dda4348cc19">dvb_scan_free_handler_table</a> (struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a> *dvb_scan_handler)</td></tr>
<tr class="memdesc:gad83553d5b779c63dff7a6dda4348cc19"><td class="mdescLeft">&#160;</td><td class="mdescRight">frees a struct <a class="el" href="structdvb__v5__descriptors.html" title="Contains the descriptors needed to scan the Service ID and other relevant info at a MPEG-TS Digital T...">dvb_v5_descriptors</a>  <a href="#gad83553d5b779c63dff7a6dda4348cc19">More...</a><br /></td></tr>
<tr class="separator:gad83553d5b779c63dff7a6dda4348cc19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98f0f4491f8bf5db68d42116c8d04293"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#ga98f0f4491f8bf5db68d42116c8d04293">dvb_get_ts_tables</a> (struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *parms, int dmx_fd, uint32_t delivery_system, unsigned other_nit, unsigned timeout_multiply)</td></tr>
<tr class="memdesc:ga98f0f4491f8bf5db68d42116c8d04293"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans a DVB stream, looking for the tables needed to identify the programs inside a MPEG-TS.  <a href="#ga98f0f4491f8bf5db68d42116c8d04293">More...</a><br /></td></tr>
<tr class="separator:ga98f0f4491f8bf5db68d42116c8d04293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00661faadb82379c4c2efe267d046970"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#ga00661faadb82379c4c2efe267d046970">dvb_free_ts_tables</a> (struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a> *<a class="el" href="structdvb__desc.html">dvb_desc</a>)</td></tr>
<tr class="memdesc:ga00661faadb82379c4c2efe267d046970"><td class="mdescLeft">&#160;</td><td class="mdescRight">frees a struct <a class="el" href="structdvb__v5__descriptors.html" title="Contains the descriptors needed to scan the Service ID and other relevant info at a MPEG-TS Digital T...">dvb_v5_descriptors</a>  <a href="#ga00661faadb82379c4c2efe267d046970">More...</a><br /></td></tr>
<tr class="separator:ga00661faadb82379c4c2efe267d046970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga422f5b57e62eb52d803842ff8cfbaf31"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#ga422f5b57e62eb52d803842ff8cfbaf31">dvb_scan_transponder</a> (struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *parms, struct <a class="el" href="structdvb__entry.html">dvb_entry</a> *entry, int dmx_fd, <a class="el" href="group__frontend__scan.html#gaf6f6f5e9d010a5060e256133cc94fcdf">check_frontend_t</a> *check_frontend, void *args, unsigned other_nit, unsigned timeout_multiply)</td></tr>
<tr class="memdesc:ga422f5b57e62eb52d803842ff8cfbaf31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans a DVB dvb_add_scaned_transponder.  <a href="#ga422f5b57e62eb52d803842ff8cfbaf31">More...</a><br /></td></tr>
<tr class="separator:ga422f5b57e62eb52d803842ff8cfbaf31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac172e2cb90570677b87e3e83c97dc61b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__frontend__scan.html#gac172e2cb90570677b87e3e83c97dc61b">dvb_add_scaned_transponders</a> (struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *parms, struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a> *dvb_scan_handler, struct <a class="el" href="structdvb__entry.html">dvb_entry</a> *first_entry, struct <a class="el" href="structdvb__entry.html">dvb_entry</a> *entry)</td></tr>
<tr class="memdesc:gac172e2cb90570677b87e3e83c97dc61b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new transponders to a <a class="el" href="structdvb__file.html" title="Describes an entire DVB file opened. ">dvb_file</a>.  <a href="#gac172e2cb90570677b87e3e83c97dc61b">More...</a><br /></td></tr>
<tr class="separator:gac172e2cb90570677b87e3e83c97dc61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gaf6f6f5e9d010a5060e256133cc94fcdf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int( check_frontend_t) (void *args, struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *parms)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback for the application to show the frontend status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>a pointer, opaque to libdvbv5, to be used by the application if needed. </td></tr>
    <tr><td class="paramname">parms</td><td>pointer to struct <a class="el" href="structdvb__v5__fe__parms.html" title="Keeps data needed to handle the DVB frontend. ">dvb_v5_fe_parms</a> created when the frontend is opened </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dvb-scan_8h_source.html#l00278">278</a> of file <a class="el" href="dvb-scan_8h_source.html">dvb-scan.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac172e2cb90570677b87e3e83c97dc61b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dvb_add_scaned_transponders </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a> *&#160;</td>
          <td class="paramname"><em>dvb_scan_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdvb__entry.html">dvb_entry</a> *&#160;</td>
          <td class="paramname"><em>first_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdvb__entry.html">dvb_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add new transponders to a <a class="el" href="structdvb__file.html" title="Describes an entire DVB file opened. ">dvb_file</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parms</td><td>pointer to struct <a class="el" href="structdvb__v5__fe__parms.html" title="Keeps data needed to handle the DVB frontend. ">dvb_v5_fe_parms</a> created when the frontend is opened </td></tr>
    <tr><td class="paramname">dvb_scan_handler</td><td>pointer to a struct <a class="el" href="structdvb__v5__descriptors.html" title="Contains the descriptors needed to scan the Service ID and other relevant info at a MPEG-TS Digital T...">dvb_v5_descriptors</a> containing scaned MPEG-TS </td></tr>
    <tr><td class="paramname">first_entry</td><td>first entry of a DVB file struct </td></tr>
    <tr><td class="paramname">entry</td><td>current entry on a DVB file struct</td></tr>
  </table>
  </dd>
</dl>
<p>When the NIT table is parsed, some new transponders could be described inside. This function adds new entries to a <a class="el" href="structdvb__file.html" title="Describes an entire DVB file opened. ">dvb_file</a> struct, pointing to those new transponders. It is used inside the scan loop, as shown at the <a class="el" href="group__frontend__scan.html#ga422f5b57e62eb52d803842ff8cfbaf31" title="Scans a DVB dvb_add_scaned_transponder. ">dvb_scan_transponder()</a>, to add new channels.</p>
<p>Example: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;for (entry = dvb_file-&gt;first_entry; entry != NULL; entry = entry-&gt;next) {</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;     struct dvb_v5_descriptors *dvb_scan_handler = NULL;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;     dvb_scan_handler = dvb_scan_transponder(parms, entry, dmx_fd,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                                        &amp;check_frontend, args,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;                                        args-&gt;other_nit,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;                                        args-&gt;timeout_multiply);</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;     if (parms-&gt;abort) {</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        dvb_scan_free_handler_table(dvb_scan_handler);</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        break;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;     }</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;     if (dvb_scan_handler) {</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        dvb_store_channel(&amp;dvb_file_new, parms, dvb_scan_handler,</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                          args-&gt;get_detected, args-&gt;get_nit);</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        dvb_scan_free_handler_table(dvb_scan_handler);</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        dvb_add_scaned_transponders(parms, dvb_scan_handler,</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;                                    dvb_file-&gt;first_entry, entry);</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        dvb_scan_free_handler_table(dvb_scan_handler);</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        }</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;}</div></div><!-- fragment --> <dl><dt><b>Examples: </b></dt><dd><a class="el" href="dvbv5-scan_8c-example.html#a28">dvbv5-scan.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga00661faadb82379c4c2efe267d046970"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dvb_free_ts_tables </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a> *&#160;</td>
          <td class="paramname"><em>dvb_desc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>frees a struct <a class="el" href="structdvb__v5__descriptors.html" title="Contains the descriptors needed to scan the Service ID and other relevant info at a MPEG-TS Digital T...">dvb_v5_descriptors</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="structdvb__desc.html" title="Linked list containing the several descriptors found on a MPEG-TS table. ">dvb_desc</a></td><td>pointed to the structure to be freed.</td></tr>
  </table>
  </dd>
</dl>
<p>This function recursively frees everything that is allocated by <a class="el" href="group__frontend__scan.html#ga98f0f4491f8bf5db68d42116c8d04293" title="Scans a DVB stream, looking for the tables needed to identify the programs inside a MPEG-TS...">dvb_get_ts_tables()</a> and stored at <a class="el" href="structdvb__desc.html" title="Linked list containing the several descriptors found on a MPEG-TS table. ">dvb_desc</a>, including <a class="el" href="structdvb__desc.html" title="Linked list containing the several descriptors found on a MPEG-TS table. ">dvb_desc</a> itself. </p>

</div>
</div>
<a class="anchor" id="ga98f0f4491f8bf5db68d42116c8d04293"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a>* dvb_get_ts_tables </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmx_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>delivery_system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>other_nit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>timeout_multiply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scans a DVB stream, looking for the tables needed to identify the programs inside a MPEG-TS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parms</td><td>pointer to struct <a class="el" href="structdvb__v5__fe__parms.html" title="Keeps data needed to handle the DVB frontend. ">dvb_v5_fe_parms</a> created when the frontend is opened </td></tr>
    <tr><td class="paramname">dmx_fd</td><td>an opened demux file descriptor </td></tr>
    <tr><td class="paramname">delivery_system</td><td>delivery system to be scanned </td></tr>
    <tr><td class="paramname">other_nit</td><td>use alternate table IDs for NIT and other tables </td></tr>
    <tr><td class="paramname">timeout_multiply</td><td>improves the timeout for each table reception by using a value that will multiply the wait time.</td></tr>
  </table>
  </dd>
</dl>
<p>Given an opened frontend and demux, this function seeks for all programs available at the transport stream, and parses the following tables: PAT, PMT, NIT, SDT (and VCT, if the delivery system is ATSC).</p>
<p>On sucess, it returns a pointer to a struct <a class="el" href="structdvb__v5__descriptors.html" title="Contains the descriptors needed to scan the Service ID and other relevant info at a MPEG-TS Digital T...">dvb_v5_descriptors</a>, that can either be used to tune into a service or to be stored inside a file. </p>

</div>
</div>
<a class="anchor" id="ga956af98a11484d5296abe1668f9485c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dvb_read_section </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmx_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read MPEG-TS tables that comes from a DTV card </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parms</td><td>pointer to struct <a class="el" href="structdvb__v5__fe__parms.html" title="Keeps data needed to handle the DVB frontend. ">dvb_v5_fe_parms</a> created when the frontend is opened </td></tr>
    <tr><td class="paramname">dmx_fd</td><td>an opened demux file descriptor </td></tr>
    <tr><td class="paramname">tid</td><td>Table ID </td></tr>
    <tr><td class="paramname">pid</td><td>Program ID </td></tr>
    <tr><td class="paramname">table</td><td>pointer to a pointer for the table struct to be filled </td></tr>
    <tr><td class="paramname">timeout</td><td>Limit, in seconds, to read a MPEG-TS table</td></tr>
  </table>
  </dd>
</dl>
<p>This function is used to read the DVB tables by specifying a table ID and a program ID. The libdvbv5 should have a parser for the descriptors of the table type that should be parsed. The table will be automatically allocated on success. The function will read on the specified demux and return when reading is done or an error has occurred. If table is not NULL after the call, it has to be freed with the apropriate free table function (even if an error has occurred).</p>
<p>If the application wants to abort the read operation, it can change the value of parms-&gt;p.abort to 1.</p>
<p>Returns 0 on success or a negative error code.</p>
<p>Example usage: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;struct dvb_table_pat *pat;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;int r = dvb_read_section( parms, dmx_fd, DVB_TABLE_PAT, DVB_TABLE_PAT_PID,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                    (void **) &amp;pat, 5 );</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;if (r &lt; 0)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;     dvb_logerr(&quot;error reading PAT table&quot;);</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;else {</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;     // do something with pat</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;}</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;if (pat)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;     dvb_table_pat_free( pat );</div></div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gab8938c61f97571d01e3608ff52c4e092"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dvb_read_section_with_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmx_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ts_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read MPEG-TS tables that comes from a DTV card with an specific table section ID </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parms</td><td>pointer to struct <a class="el" href="structdvb__v5__fe__parms.html" title="Keeps data needed to handle the DVB frontend. ">dvb_v5_fe_parms</a> created when the frontend is opened </td></tr>
    <tr><td class="paramname">dmx_fd</td><td>an opened demux file descriptor </td></tr>
    <tr><td class="paramname">tid</td><td>Table ID </td></tr>
    <tr><td class="paramname">pid</td><td>Program ID </td></tr>
    <tr><td class="paramname">ts_id</td><td>Table section ID (for multisession filtering). If no specific table section is needed, -1 should be used </td></tr>
    <tr><td class="paramname">table</td><td>pointer to a pointer for the table struct to be filled </td></tr>
    <tr><td class="paramname">timeout</td><td>limit, in seconds, to read a MPEG-TS table</td></tr>
  </table>
  </dd>
</dl>
<p>This is a variant of <a class="el" href="group__frontend__scan.html#ga956af98a11484d5296abe1668f9485c4" title="read MPEG-TS tables that comes from a DTV card ">dvb_read_section()</a> that also seeks for an specific table section ID given by ts_id. </p>

</div>
</div>
<a class="anchor" id="gaf274aa17abefce824e5c4a2a8e082c4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dvb_read_sections </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmx_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdvb__table__filter.html">dvb_table_filter</a> *&#160;</td>
          <td class="paramname"><em>sect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read MPEG-TS tables that comes from a DTV card </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parms</td><td>pointer to struct <a class="el" href="structdvb__v5__fe__parms.html" title="Keeps data needed to handle the DVB frontend. ">dvb_v5_fe_parms</a> created when the frontend is opened </td></tr>
    <tr><td class="paramname">dmx_fd</td><td>an opened demux file descriptor </td></tr>
    <tr><td class="paramname">sect</td><td>section filter pointer </td></tr>
    <tr><td class="paramname">timeout</td><td>limit, in seconds, to read a MPEG-TS table</td></tr>
  </table>
  </dd>
</dl>
<p>This is a variant of <a class="el" href="group__frontend__scan.html#ga956af98a11484d5296abe1668f9485c4" title="read MPEG-TS tables that comes from a DTV card ">dvb_read_section()</a> that uses a struct <a class="el" href="structdvb__table__filter.html" title="Describes the PES filters used by DVB scan. ">dvb_table_filter</a> to specify the filter to use. </p>

</div>
</div>
<a class="anchor" id="ga0f86effb71027013c4973527af9a25d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a>* dvb_scan_alloc_handler_table </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>delivery_system</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>allocates a struct <a class="el" href="structdvb__v5__descriptors.html" title="Contains the descriptors needed to scan the Service ID and other relevant info at a MPEG-TS Digital T...">dvb_v5_descriptors</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">delivery_system</td><td>Delivery system to be used on the table</td></tr>
  </table>
  </dd>
</dl>
<p>At success, returns a pointer. NULL otherwise. </p>

</div>
</div>
<a class="anchor" id="gad83553d5b779c63dff7a6dda4348cc19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dvb_scan_free_handler_table </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a> *&#160;</td>
          <td class="paramname"><em>dvb_scan_handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>frees a struct <a class="el" href="structdvb__v5__descriptors.html" title="Contains the descriptors needed to scan the Service ID and other relevant info at a MPEG-TS Digital T...">dvb_v5_descriptors</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dvb_scan_handler</td><td>pointer to the struct to be freed. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="dvbv5-scan_8c-example.html#a26">dvbv5-scan.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga422f5b57e62eb52d803842ff8cfbaf31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdvb__v5__descriptors.html">dvb_v5_descriptors</a>* dvb_scan_transponder </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdvb__v5__fe__parms.html">dvb_v5_fe_parms</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdvb__entry.html">dvb_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmx_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__frontend__scan.html#gaf6f6f5e9d010a5060e256133cc94fcdf">check_frontend_t</a> *&#160;</td>
          <td class="paramname"><em>check_frontend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>other_nit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>timeout_multiply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scans a DVB dvb_add_scaned_transponder. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parms</td><td>pointer to struct <a class="el" href="structdvb__v5__fe__parms.html" title="Keeps data needed to handle the DVB frontend. ">dvb_v5_fe_parms</a> created when the frontend is opened </td></tr>
    <tr><td class="paramname">entry</td><td>DVB file entry that corresponds to a transponder to be tuned </td></tr>
    <tr><td class="paramname">dmx_fd</td><td>an opened demux file descriptor </td></tr>
    <tr><td class="paramname">check_frontend</td><td>a pointer to a function that will show the frontend status while tuning into a transponder </td></tr>
    <tr><td class="paramname">args</td><td>a pointer, opaque to libdvbv5, that will be used when calling check_frontend. It should contain any parameters that could be needed by check_frontend. </td></tr>
    <tr><td class="paramname">other_nit</td><td>Use alternate table IDs for NIT and other tables </td></tr>
    <tr><td class="paramname">timeout_multiply</td><td>Improves the timeout for each table reception, by</td></tr>
  </table>
  </dd>
</dl>
<p>This is the function that applications should use when doing a transponders scan. It does everything needed to fill the entries with DVB programs (virtual channels) and detect the PIDs associated with them.</p>
<p>A typical usage is to after open a channel file, open a dmx_fd and open a frontend. Then, seek for the MPEG tables on all the transponder frequencies with:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;for (entry = dvb_file-&gt;first_entry; entry != NULL; entry = entry-&gt;next) {</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;     struct dvb_v5_descriptors *dvb_scan_handler = NULL;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;     dvb_scan_handler = dvb_scan_transponder(parms, entry, dmx_fd,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                                        &amp;check_frontend, args,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;                                        args-&gt;other_nit,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;                                        args-&gt;timeout_multiply);</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;     if (parms-&gt;abort) {</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        dvb_scan_free_handler_table(dvb_scan_handler);</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        break;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;     }</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;     if (dvb_scan_handler) {</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        dvb_store_channel(&amp;dvb_file_new, parms, dvb_scan_handler,</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                          args-&gt;get_detected, args-&gt;get_nit);</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        dvb_scan_free_handler_table(dvb_scan_handler);</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        }</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;}</div></div><!-- fragment --> <dl><dt><b>Examples: </b></dt><dd><a class="el" href="dvbv5-scan_8c-example.html#a25">dvbv5-scan.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga0bd956908517ea2d53ad2de62df7247c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dvb_table_filter_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdvb__table__filter.html">dvb_table_filter</a> *&#160;</td>
          <td class="paramname"><em>sect</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>deallocates all data associated with a table filter </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sect</td><td>table filter pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
